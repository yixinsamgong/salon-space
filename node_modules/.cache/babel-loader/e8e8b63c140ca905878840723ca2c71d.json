{"ast":null,"code":"var _jsxFileName = \"/Users/yixin/Development/code/phase-2/phase-2-project/src/components/Database.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // import SearchBar from \"./SearchBar\"\n\nimport NewContainer from \"./NewContainer\";\nimport SearchBar from \"./SearchBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Database(_ref) {\n  _s();\n\n  let {\n    handleClick\n  } = _ref;\n  const [newWorks, setNewWorks] = useState([]);\n  const [ids, setIds] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  let arr = []; //useEffect 2. when ids state gets updated, start fetching each individual id\n  //useEffect 1. gets ids when search term changes\n\n  useEffect(() => {\n    if (!search) return;\n    fetch(`https://collectionapi.metmuseum.org/public/collection/v1/search?artistOrCulture=true&q=${search}`).then(r => r.json()).then(data => {\n      // console.log('Data', data)\n      // let list = data.objectIDs.filter(entry => entry.created > 100).slice(0, 99);\n      let idList = data.objectIDs.slice(0, 10); // console.log(list)\n      // setIds(list)\n      // do the search functionality right here\n\n      let artList = [];\n      let artworks = idList.forEach(async id => {\n        let req = await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`);\n        let res = await req.json();\n        let art = {\n          title: res.title,\n          image: res.primaryImageSmall,\n          date: res.objectDate,\n          artist: res.artistDisplayName,\n          medium: res.medium,\n          reference: res.objectURL\n        };\n        console.log('Work of art', art);\n        artList.push(art);\n        console.log('Art list', artList);\n        setNewWorks(artList);\n      });\n    });\n  } // eslint-disable-next-line react-hooks/exhaustive-deps\n  , [search]); //   const displayArtworks = newWorks.filter((newWork) => \n  //       Object.values(newWork).join(\" \").toLowerCase().includes(search.toLowerCase())\n  //   )\n  // console.log(newWorks)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      searchTerm: search,\n      onSearchChange: setSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(NewContainer, {\n      newWorks: newWorks,\n      handleClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Database, \"ua/l8K/CkUODOvg3FleDsZ+nCzY=\");\n\n_c = Database;\nexport default Database;\n\nvar _c;\n\n$RefreshReg$(_c, \"Database\");","map":{"version":3,"names":["React","useEffect","useState","NewContainer","SearchBar","Database","handleClick","newWorks","setNewWorks","ids","setIds","search","setSearch","arr","fetch","then","r","json","data","idList","objectIDs","slice","artList","artworks","forEach","id","req","res","art","title","image","primaryImageSmall","date","objectDate","artist","artistDisplayName","medium","reference","objectURL","console","log","push"],"sources":["/Users/yixin/Development/code/phase-2/phase-2-project/src/components/Database.js"],"sourcesContent":["import React, {useEffect,useState} from 'react'\n// import SearchBar from \"./SearchBar\"\nimport NewContainer from \"./NewContainer\"\nimport SearchBar from \"./SearchBar\"\n\n\nfunction Database({handleClick}) {\n\nconst [newWorks, setNewWorks] = useState([])\nconst [ids, setIds] = useState([])\nconst [search, setSearch] = useState(\"\")\n\nlet arr =[]\n\n//useEffect 2. when ids state gets updated, start fetching each individual id\n//useEffect 1. gets ids when search term changes\nuseEffect(() => {\n        if (!search) return;\n        fetch(`https://collectionapi.metmuseum.org/public/collection/v1/search?artistOrCulture=true&q=${search}`)                                            \n            .then(r=> r.json())\n            .then((data) => {\n                // console.log('Data', data)\n                // let list = data.objectIDs.filter(entry => entry.created > 100).slice(0, 99);\n                let idList = data.objectIDs.slice(0,10)\n                // console.log(list)\n                // setIds(list)\n                // do the search functionality right here\n                let artList = []\n                let artworks = idList.forEach(async (id) => {\n                    let req = await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`);\n                    let res = await req.json()\n                    let art = {\n                        title: res.title,\n                        image: res.primaryImageSmall,\n                        date: res.objectDate,\n                        artist: res.artistDisplayName,\n                        medium: res.medium,\n                        reference: res.objectURL\n                    }\n                    console.log('Work of art', art)\n                    artList.push(art)\n                    console.log('Art list', artList)\n                    setNewWorks(artList)\n                })\n\n                \n            })\n        } // eslint-disable-next-line react-hooks/exhaustive-deps\n,[search])\n\n//   const displayArtworks = newWorks.filter((newWork) => \n//       Object.values(newWork).join(\" \").toLowerCase().includes(search.toLowerCase())\n//   )\n\n// console.log(newWorks)\n\nreturn (\n    <div>     \n    <SearchBar searchTerm={search} onSearchChange={setSearch}/>\n    <NewContainer newWorks={newWorks} handleClick={handleClick} />\n    </div>\n  )\n\n\n}\nexport default Database\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,QAAzB,QAAwC,OAAxC,C,CACA;;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;;AAGA,SAASC,QAAT,OAAiC;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAEjC,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACO,GAAD,EAAMC,MAAN,IAAgBR,QAAQ,CAAC,EAAD,CAA9B;EACA,MAAM,CAACS,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,EAAD,CAApC;EAEA,IAAIW,GAAG,GAAE,EAAT,CANiC,CAQjC;EACA;;EACAZ,SAAS,CAAC,MAAM;IACR,IAAI,CAACU,MAAL,EAAa;IACbG,KAAK,CAAE,0FAAyFH,MAAO,EAAlG,CAAL,CACKI,IADL,CACUC,CAAC,IAAGA,CAAC,CAACC,IAAF,EADd,EAEKF,IAFL,CAEWG,IAAD,IAAU;MACZ;MACA;MACA,IAAIC,MAAM,GAAGD,IAAI,CAACE,SAAL,CAAeC,KAAf,CAAqB,CAArB,EAAuB,EAAvB,CAAb,CAHY,CAIZ;MACA;MACA;;MACA,IAAIC,OAAO,GAAG,EAAd;MACA,IAAIC,QAAQ,GAAGJ,MAAM,CAACK,OAAP,CAAe,MAAOC,EAAP,IAAc;QACxC,IAAIC,GAAG,GAAG,MAAMZ,KAAK,CAAE,oEAAmEW,EAAG,EAAxE,CAArB;QACA,IAAIE,GAAG,GAAG,MAAMD,GAAG,CAACT,IAAJ,EAAhB;QACA,IAAIW,GAAG,GAAG;UACNC,KAAK,EAAEF,GAAG,CAACE,KADL;UAENC,KAAK,EAAEH,GAAG,CAACI,iBAFL;UAGNC,IAAI,EAAEL,GAAG,CAACM,UAHJ;UAINC,MAAM,EAAEP,GAAG,CAACQ,iBAJN;UAKNC,MAAM,EAAET,GAAG,CAACS,MALN;UAMNC,SAAS,EAAEV,GAAG,CAACW;QANT,CAAV;QAQAC,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BZ,GAA3B;QACAN,OAAO,CAACmB,IAAR,CAAab,GAAb;QACAW,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBlB,OAAxB;QACAd,WAAW,CAACc,OAAD,CAAX;MACH,CAfc,CAAf;IAkBH,CA5BL;EA6BC,CA/BA,CA+BC;EA/BD,EAgCR,CAACX,MAAD,CAhCQ,CAAT,CAViC,CA4CjC;EACA;EACA;EAEA;;EAEA,oBACI;IAAA,wBACA,QAAC,SAAD;MAAW,UAAU,EAAEA,MAAvB;MAA+B,cAAc,EAAEC;IAA/C;MAAA;MAAA;MAAA;IAAA,QADA,eAEA,QAAC,YAAD;MAAc,QAAQ,EAAEL,QAAxB;MAAkC,WAAW,EAAED;IAA/C;MAAA;MAAA;MAAA;IAAA,QAFA;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAQC;;GA1DQD,Q;;KAAAA,Q;AA2DT,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}